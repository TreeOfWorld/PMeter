# PMeter——基于python的性能测试工具

> 一个基于python+locust的接口测试工具

## 1. 需求分析

对web应用进行压力测试时，通常使用的工具是Apache
JMeter，其基于java开发。因其测试并发时需要创建大量的线程，这对单测试机的性能造成了挑战。而python的locust是一个基于python协程开发的压力测试框架：

GitHub - locustio/locust: Write scalable load tests in plain Python 🚗💨
极大的提高了单机进行压测的性能，且基于其自定义脚本的能力，可以支持高自由度、可定制的测试能力。
但是在实际的http接口性能测试中，我们往往不需要过高的自由度，更希望通过像JMeter那样的可视化界面，通过简单的操作就能快速开始我们的测试工作。此外，用于测试的测试机往往没有python解释器，这也会影响性能测试脚本的运行。
本项目的主要目标如下：
在保留locust高自由度、定制化的同时，使其运行尽可能的简单
通过pyinstaller对python性能测试脚本进行构建，将其打包为一个exe文件，方便在不同的测试机上进行运行

## 2. 主要模块

当前为第一版，希望能够快速实现上面的两个首要目标，对gui的操作进行忽略。希望通过json配置的方式来定义多个测试任务。
通过一个Task加载器加载多个测试任务。

### 2.1. 任务加载器

### 2.2. 任务执行器（基于locust实现）

## 3. 存在问题

locust的启动是通过locust -f locustfile.py运行的，这就要求当前的python解释器已经安装了locust，这与我们的期望不符。
locust多个接口的权重控制和ops控制似乎有点问题，需要考虑重写？
为了实现ops控制，将来或许可以自己基于协程重写一个locust